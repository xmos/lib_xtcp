VERSION = 7.0.1

DEPENDENT_MODULES = lib_ethernet(>=4.1.0) lib_otpinfo(>=2.2.1) lib_random(>=1.3.1) lib_xassert(>=4.3.2) lib_logging(>=3.4.0)

# Build flags
MODULE_XCC_FLAGS = $(XCC_FLAGS) -g -O3 -mno-dual-issue -DSSIZE_MAX=INT_MAX

ifndef LWIP_OPTS_PATH
$(warning "LWIP_OPTS_PATH not defined, setting to 'standard', may be overridden in the application's Makefile")
LWIP_OPTS_PATH = ../lwip/contrib/ports/xmos/lib/standard
endif

# Source directories
# Note: only includes IPv4 of lwIP
LWIP_SOURCE_DIRS = ../lwip/api ../lwip/src/api ../lwip/src/core ../lwip/src/core/ipv4 ../lwip/src/netif ../lwip/contrib/ports/xmos/port

# Include directories
LWIP_INCLUDE_DIRS = ../lwip/src/include ../lwip/contrib ../lwip/contrib/ports/xmos/include $(LWIP_OPTS_PATH)

# Exclude files
LWIP_EXCLUDE_FILES += slipif.c

# Provide the conditional defines needed for optional includes
OPTIONAL_HEADERS += xtcp_client_conf.h xtcp_conf.h

SOURCE_DIRS   += $(LWIP_SOURCE_DIRS) src
INCLUDE_DIRS  += $(LWIP_INCLUDE_DIRS) api src
EXCLUDE_FILES += $(LWIP_EXCLUDE_FILES)

